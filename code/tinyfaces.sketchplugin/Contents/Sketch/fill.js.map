{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/fill.js","webpack://exports/external \"sketch\""],"names":["doc","sketch","getSelectedDocument","selection","selectedLayers","length","UI","message","minQuality","identifier","gender","data","getRandomData","imagesArray","namesArray","forEach","item","imageURL","avatars","url","push","name","first_name","last_name","hasDifferentSymbols","alert","firstSymbolMaster","getFirstSymbolMaster","layerOverride","layer","askForLayerToReplaceInSymbol","context","fillLayer","master","layersInMaster","children","filtered","filterLayersToOverrideable","names","i","inputs","gotInput","api","getSelectionFromUser","chosenIndex","targetLayer","layers","className","symbolMaster","requestWithURL","request","NSURLRequest","NSURL","URLWithString","NSURLConnection","sendSynchronousRequest_returningResponse_error","min_quality","genderQuery","queryString","response","e","log","getFirstAndRemoveFromArray","array","value","splice","seenUUIDs","uuid","objectID","indexOf","possible","fills","style","image","stringValue","imageURLString","imageData","generateImageData","newOverrides","overrides","mutableOverrides","NSMutableDictionary","dictionaryWithDictionary","setObject_forKey","objectForKey","fill","firstObject","setFillType","setImage","setPatternFillType"],"mappings":"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","file":"fill.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/fill.js\");\n","import sketch from \"sketch\";\n// documentation: https://developer.sketchapp.com/reference/api/\n\nexport default function() {\n  const doc = sketch.getSelectedDocument();\n  const selection = doc.selectedLayers;\n\n  if (selection.length == 0) {\n    sketch.UI.message(\n      `Something went wrong while contacting tinyfac.es. Try again later?`\n    );\n    return;\n  }\n\n  var minQuality = 0;\n  if (identifier == \"fillhigh\") {\n    minQuality = 6;\n  }\n\n  var gender = \"\";\n  if (identifier == \"fillmale\") {\n    gender = \"male\";\n  }\n  if (identifier == \"fillfemale\") {\n    gender = \"female\";\n  }\n\n  var data = getRandomData(gender, minQuality);\n\n  if (data.length == 0) {\n    sketch.UI.message(\n      `Something went wrong getting data from tinyfac.es. Try again later?`\n    );\n    return;\n  }\n\n  var imagesArray = [];\n  var namesArray = [];\n\n  data.forEach(function(item) {\n    var imageURL = item.avatars[2].url;\n    imagesArray.push(imageURL);\n    var name = item.first_name + \" \" + item.last_name;\n    namesArray.push(name);\n  });\n\n  if (hasDifferentSymbols(selection)) {\n    sketch.alert(\n      \"You can't have different types of symbols selected when using this.\",\n      \"Make sure you only have one type of symbol and try again.\"\n    );\n    return;\n  }\n\n  var firstSymbolMaster = getFirstSymbolMaster(selection);\n  var layerOverride;\n  if (firstSymbolMaster) {\n    var layer = askForLayerToReplaceInSymbol(firstSymbolMaster, context);\n    layerOverride = layer;\n  }\n\n  selection.forEach(function(layer) {\n    fillLayer(layer, imagesArray, namesArray, context, layerOverride);\n  });\n}\n\nfunction askForLayerToReplaceInSymbol(master, context) {\n  let layersInMaster = master.children();\n  let filtered = filterLayersToOverrideable(layersInMaster);\n  let names = [];\n  for (var i = 0; i < filtered.length; i++) {\n    let name = filtered[i].name();\n    names.push(name);\n  }\n\n  var inputs = names;\n\n  var gotInput = context\n    .api()\n    .getSelectionFromUser(\n      \"What layer would you like to fill with random data?\",\n      inputs,\n      0\n    );\n  var chosenIndex = gotInput[1];\n\n  let targetLayer = filtered[chosenIndex];\n  return targetLayer;\n}\n\nfunction getFirstSymbolMaster(layers) {\n  for (var i = 0; i < layers.length; i++) {\n    if (layers[i].className() == \"MSSymbolInstance\") {\n      let master = layers[i].symbolMaster();\n      return master;\n    }\n  }\n\n  return false;\n}\n\nfunction requestWithURL(url) {\n  let request = NSURLRequest.requestWithURL(NSURL.URLWithString(url));\n  return NSURLConnection.sendSynchronousRequest_returningResponse_error(\n    request,\n    null,\n    null\n  );\n}\n\nfunction getRandomData(gender, min_quality) {\n  var genderQuery = \"\";\n  if (gender == \"male\") {\n    genderQuery = \"&gender=male\";\n  } else if (gender == \"female\") {\n    genderQuery = \"&gender=female\";\n  }\n  var queryString =\n    \"https://tinyfac.es/api/users/?min_quality=\" + min_quality + genderQuery;\n\n  try {\n    let response = requestWithURL(queryString);\n    if (response) {\n      return response;\n    } else {\n      throw \"⚠️ TinyFaces can't be contacted. Check your internet...\";\n    }\n  } catch (e) {\n    log(e);\n    UI.message(e);\n    return;\n  }\n}\n\nfunction getFirstAndRemoveFromArray(array) {\n  var value = array.splice(0, 1)[0];\n  return value;\n}\n\nfunction hasDifferentSymbols(layers) {\n  var seenUUIDs = [];\n  for (var i = 0; i < layers.length; i++) {\n    if (layers[i].className() == \"MSSymbolInstance\") {\n      let uuid = layers[i].symbolMaster().objectID();\n      if (seenUUIDs.indexOf(uuid) === -1) {\n        seenUUIDs.push(uuid);\n      }\n    }\n  }\n  if (seenUUIDs.length > 1) {\n    return true;\n  }\n  return false;\n}\n\nfunction filterLayersToOverrideable(layers) {\n  var possible = [];\n\n  layers.forEach(function(layer) {\n    if (layer.className() == \"MSTextLayer\") {\n      possible.push(layer);\n    } else if (layer.className() == \"MSShapeGroup\") {\n      var fills = layer.style().fills();\n      if (fills[0].image()) {\n        possible.push(layer);\n      }\n    }\n  });\n\n  return possible;\n}\n\nfunction fillLayer(layer, imagesArray, namesArray, context, layerOverride) {\n  if (layer.className() == \"MSTextLayer\") {\n    var name = getFirstAndRemoveFromArray(namesArray);\n    layer.stringValue = name;\n  } else if (layer.className() == \"MSSymbolInstance\") {\n    if (layerOverride) {\n      // update the mutable dictionary\n\n      if (layerOverride.className() == \"MSShapeGroup\") {\n        var imageURLString = getFirstAndRemoveFromArray(imagesArray);\n        var imageData = generateImageData(imageURLString);\n\n        // Get existing overrides or make one if none exists\n        var newOverrides = layer.overrides();\n        if (newOverrides == null) {\n          newOverrides = {};\n        }\n\n        // Create mutable copy\n        var mutableOverrides = NSMutableDictionary.dictionaryWithDictionary(\n          newOverrides\n        );\n        mutableOverrides.setObject_forKey(\n          NSMutableDictionary.dictionaryWithDictionary(\n            newOverrides.objectForKey(0)\n          ),\n          0\n        );\n\n        // Change item in the overrides\n        mutableOverrides.setObject_forKey(imageData, layerOverride.objectID());\n\n        // Change overrides\n        layer.overrides = mutableOverrides;\n      } else if (layerOverride.className() == \"MSTextLayer\") {\n        var name = getFirstAndRemoveFromArray(namesArray);\n\n        // Get existing overrides or make one if none exists\n        var newOverrides = layer.overrides();\n        if (newOverrides == null) {\n          newOverrides = {};\n        }\n\n        // Create mutable copy\n        var mutableOverrides = NSMutableDictionary.dictionaryWithDictionary(\n          newOverrides\n        );\n        mutableOverrides.setObject_forKey(\n          NSMutableDictionary.dictionaryWithDictionary(\n            newOverrides.objectForKey(0)\n          ),\n          0\n        );\n\n        // Change item in the overrides\n        mutableOverrides.setObject_forKey(name, layerOverride.objectID());\n\n        // Change overrides\n        layer.overrides = mutableOverrides;\n      }\n    }\n  } else if (layer.className() == \"MSShapeGroup\") {\n    var imageURLString = getFirstAndRemoveFromArray(imagesArray);\n    var fill = layer\n      .style()\n      .fills()\n      .firstObject();\n    fill.setFillType(4);\n    fill.setImage(generateImageData(imageURLString));\n    fill.setPatternFillType(1);\n  } else if (layer.className() == \"MSLayerGroup\") {\n    layer.layers().forEach(function(layer) {\n      fillLayer(layer, imagesArray, namesArray, context);\n    });\n  }\n}\n","module.exports = require(\"sketch\");"],"sourceRoot":""}